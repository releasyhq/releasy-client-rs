{
  "openapi": "3.1.0",
  "info": {
    "title": "Releasy API",
    "description": "Releasy API surface for releases, artifacts, downloads, and admin ops.",
    "license": {
      "name": ""
    },
    "version": "0.1.0"
  },
  "paths": {
    "/openapi.json": {
      "get": {
        "tags": [
          "meta"
        ],
        "summary": "Fetch the OpenAPI document",
        "description": "Returns the generated OpenAPI JSON document.",
        "operationId": "openapi_json",
        "responses": {
          "200": {
            "description": "OpenAPI document"
          }
        }
      }
    },
    "/v1/admin/audit-events": {
      "get": {
        "tags": [
          "audit"
        ],
        "summary": "List audit events",
        "description": "Lists audit events with optional filters and pagination.",
        "operationId": "list_audit_events",
        "parameters": [
          {
            "name": "customer_id",
            "in": "query",
            "description": "Filter by customer id",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "actor",
            "in": "query",
            "description": "Filter by actor",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "event",
            "in": "query",
            "description": "Filter by event name",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "created_from",
            "in": "query",
            "description": "Filter events created at or after timestamp",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "created_to",
            "in": "query",
            "description": "Filter events created at or before timestamp",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Page size (default 50, max 200)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Page offset (default 0)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Audit events list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditEventListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/admin/customers": {
      "post": {
        "tags": [
          "admin"
        ],
        "summary": "Create a customer",
        "description": "Creates a new customer record. Requires platform_admin role.",
        "operationId": "admin_create_customer",
        "parameters": [
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateCustomerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Customer created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminCreateCustomerResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/admin/customers/{customer_id}/entitlements": {
      "get": {
        "tags": [
          "entitlements"
        ],
        "summary": "List customer entitlements",
        "description": "Lists entitlements for a customer with optional product filtering.",
        "operationId": "list_entitlements",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "description": "Customer identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "product",
            "in": "query",
            "description": "Optional product filter",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Page size (default 50, max 200)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Page offset (default 0)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Entitlements list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntitlementListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      },
      "post": {
        "tags": [
          "entitlements"
        ],
        "summary": "Create an entitlement",
        "description": "Creates an entitlement for a customer. Requires platform_admin role.",
        "operationId": "create_entitlement",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "description": "Customer identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntitlementCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Entitlement created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntitlementResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/admin/customers/{customer_id}/entitlements/{entitlement_id}": {
      "delete": {
        "tags": [
          "entitlements"
        ],
        "summary": "Delete an entitlement",
        "description": "Deletes an entitlement for a customer. Requires platform_admin role.",
        "operationId": "delete_entitlement",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "description": "Customer identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "entitlement_id",
            "in": "path",
            "description": "Entitlement identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Entitlement deleted"
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Entitlement not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      },
      "patch": {
        "tags": [
          "entitlements"
        ],
        "summary": "Update an entitlement",
        "description": "Updates an existing entitlement for a customer. Requires platform_admin role.",
        "operationId": "update_entitlement",
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "description": "Customer identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "entitlement_id",
            "in": "path",
            "description": "Entitlement identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntitlementUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Entitlement updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntitlementResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Entitlement not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/admin/keys": {
      "post": {
        "tags": [
          "keys"
        ],
        "summary": "Create an API key",
        "description": "Creates an API key for a customer. Requires platform_admin role.",
        "operationId": "admin_create_key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateKeyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "API key created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminCreateKeyResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/admin/keys/revoke": {
      "post": {
        "tags": [
          "keys"
        ],
        "summary": "Revoke an API key",
        "description": "Revokes an API key for a customer. Requires platform_support or platform_admin.",
        "operationId": "admin_revoke_key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminRevokeKeyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "API key revoked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminRevokeKeyResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "API key not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/auth/introspect": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Introspect API key",
        "description": "Returns API key metadata when the key is valid and authorized.",
        "operationId": "auth_introspect",
        "responses": {
          "200": {
            "description": "Introspection result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiKeyIntrospection"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ]
      }
    },
    "/v1/downloads/token": {
      "post": {
        "tags": [
          "downloads"
        ],
        "summary": "Create download token",
        "description": "Creates a download token for an artifact. Requires API key with downloads:token scope.",
        "operationId": "create_download_token",
        "parameters": [
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DownloadTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Download token created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DownloadTokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Artifact or release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ]
      }
    },
    "/v1/downloads/{token}": {
      "get": {
        "tags": [
          "downloads"
        ],
        "summary": "Resolve download token",
        "description": "Resolves a download token and redirects to the artifact download URL.",
        "operationId": "resolve_download_token",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "description": "Download token",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to artifact download"
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Token not found or expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        }
      }
    },
    "/v1/releases": {
      "get": {
        "tags": [
          "releases"
        ],
        "summary": "List releases",
        "description": "Lists releases. Admins can filter all statuses; API keys only see published releases for entitled products.",
        "operationId": "list_releases",
        "parameters": [
          {
            "name": "product",
            "in": "query",
            "description": "Optional product filter",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "version",
            "in": "query",
            "description": "Optional version filter",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Optional status filter",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "include_artifacts",
            "in": "query",
            "description": "Include artifact summaries",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Page size (default 50, max 200)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Page offset (default 0)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Releases list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReleaseListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          },
          {
            "api_key": []
          }
        ]
      },
      "post": {
        "tags": [
          "releases"
        ],
        "summary": "Create a release",
        "description": "Creates a draft release. Requires platform_admin or release_publisher.",
        "operationId": "create_release",
        "parameters": [
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReleaseCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Release created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReleaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Release already exists or idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/releases/{release_id}": {
      "delete": {
        "tags": [
          "releases"
        ],
        "summary": "Delete a release",
        "description": "Deletes a release. Requires platform_admin.",
        "operationId": "delete_release",
        "parameters": [
          {
            "name": "release_id",
            "in": "path",
            "description": "Release identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Release deleted"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/releases/{release_id}/artifacts": {
      "post": {
        "tags": [
          "artifacts"
        ],
        "summary": "Register artifact",
        "description": "Registers an uploaded artifact. Requires platform_admin or release_publisher.",
        "operationId": "register_release_artifact",
        "parameters": [
          {
            "name": "release_id",
            "in": "path",
            "description": "Release identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArtifactRegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Artifact registered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArtifactRegisterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Artifact already exists or idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/releases/{release_id}/artifacts/presign": {
      "post": {
        "tags": [
          "artifacts"
        ],
        "summary": "Presign artifact upload",
        "description": "Returns a presigned URL for uploading an artifact. Requires platform_admin or release_publisher.",
        "operationId": "presign_release_artifact_upload",
        "parameters": [
          {
            "name": "release_id",
            "in": "path",
            "description": "Release identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Idempotency-Key",
            "in": "header",
            "description": "Idempotency key for safe retries.",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArtifactPresignRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Presigned upload created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArtifactPresignResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Idempotency conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Artifact storage not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/releases/{release_id}/publish": {
      "post": {
        "tags": [
          "releases"
        ],
        "summary": "Publish a release",
        "description": "Publishes a draft release. Requires platform_admin or release_publisher.",
        "operationId": "publish_release",
        "parameters": [
          {
            "name": "release_id",
            "in": "path",
            "description": "Release identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Release published",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReleaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Release status changed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    },
    "/v1/releases/{release_id}/unpublish": {
      "post": {
        "tags": [
          "releases"
        ],
        "summary": "Unpublish a release",
        "description": "Unpublishes a release. Requires platform_admin.",
        "operationId": "unpublish_release",
        "parameters": [
          {
            "name": "release_id",
            "in": "path",
            "description": "Release identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Release unpublished",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReleaseResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "404": {
            "description": "Release not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "409": {
            "description": "Release status changed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          },
          "503": {
            "description": "Admin auth not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBody"
                }
              }
            }
          }
        },
        "security": [
          {
            "admin_key": []
          },
          {
            "operator_jwt": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AdminCreateCustomerRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "plan": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "AdminCreateCustomerResponse": {
        "type": "object",
        "required": [
          "id",
          "name",
          "created_at"
        ],
        "properties": {
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "plan": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "AdminCreateKeyRequest": {
        "type": "object",
        "required": [
          "customer_id"
        ],
        "properties": {
          "customer_id": {
            "type": "string"
          },
          "expires_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "key_type": {
            "type": [
              "string",
              "null"
            ]
          },
          "name": {
            "type": [
              "string",
              "null"
            ]
          },
          "scopes": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            }
          }
        }
      },
      "AdminCreateKeyResponse": {
        "type": "object",
        "required": [
          "api_key_id",
          "api_key",
          "customer_id",
          "key_type",
          "scopes"
        ],
        "properties": {
          "api_key": {
            "type": "string"
          },
          "api_key_id": {
            "type": "string"
          },
          "customer_id": {
            "type": "string"
          },
          "expires_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "key_type": {
            "type": "string"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "AdminRevokeKeyRequest": {
        "type": "object",
        "required": [
          "api_key_id"
        ],
        "properties": {
          "api_key_id": {
            "type": "string"
          }
        }
      },
      "AdminRevokeKeyResponse": {
        "type": "object",
        "required": [
          "api_key_id"
        ],
        "properties": {
          "api_key_id": {
            "type": "string"
          }
        }
      },
      "ApiKeyIntrospection": {
        "type": "object",
        "required": [
          "active",
          "api_key_id",
          "customer_id",
          "key_type",
          "scopes"
        ],
        "properties": {
          "active": {
            "type": "boolean"
          },
          "api_key_id": {
            "type": "string"
          },
          "customer_id": {
            "type": "string"
          },
          "expires_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "key_type": {
            "type": "string"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ArtifactPresignRequest": {
        "type": "object",
        "required": [
          "filename",
          "platform"
        ],
        "properties": {
          "filename": {
            "type": "string"
          },
          "platform": {
            "type": "string"
          }
        }
      },
      "ArtifactPresignResponse": {
        "type": "object",
        "required": [
          "artifact_id",
          "object_key",
          "upload_url",
          "expires_at"
        ],
        "properties": {
          "artifact_id": {
            "type": "string"
          },
          "expires_at": {
            "type": "integer",
            "format": "int64"
          },
          "object_key": {
            "type": "string"
          },
          "upload_url": {
            "type": "string"
          }
        }
      },
      "ArtifactRegisterRequest": {
        "type": "object",
        "required": [
          "artifact_id",
          "object_key",
          "checksum",
          "size",
          "platform"
        ],
        "properties": {
          "artifact_id": {
            "type": "string"
          },
          "checksum": {
            "type": "string"
          },
          "object_key": {
            "type": "string"
          },
          "platform": {
            "type": "string"
          },
          "size": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "ArtifactRegisterResponse": {
        "type": "object",
        "required": [
          "id",
          "release_id",
          "object_key",
          "checksum",
          "size",
          "platform",
          "created_at"
        ],
        "properties": {
          "checksum": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string"
          },
          "object_key": {
            "type": "string"
          },
          "platform": {
            "type": "string"
          },
          "release_id": {
            "type": "string"
          },
          "size": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "ArtifactSummary": {
        "type": "object",
        "required": [
          "id",
          "object_key",
          "platform",
          "checksum",
          "size"
        ],
        "properties": {
          "checksum": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "object_key": {
            "type": "string"
          },
          "platform": {
            "type": "string"
          },
          "size": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "AuditEventListQuery": {
        "type": "object",
        "properties": {
          "actor": {
            "type": [
              "string",
              "null"
            ]
          },
          "created_from": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "created_to": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "customer_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "event": {
            "type": [
              "string",
              "null"
            ]
          },
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "offset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          }
        }
      },
      "AuditEventListResponse": {
        "type": "object",
        "required": [
          "events",
          "limit",
          "offset"
        ],
        "properties": {
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditEventResponse"
            }
          },
          "limit": {
            "type": "integer",
            "format": "int64"
          },
          "offset": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "AuditEventResponse": {
        "type": "object",
        "required": [
          "id",
          "actor",
          "event",
          "created_at"
        ],
        "properties": {
          "actor": {
            "type": "string"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "customer_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "event": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "payload": {}
        }
      },
      "DownloadTokenRequest": {
        "type": "object",
        "required": [
          "artifact_id"
        ],
        "properties": {
          "artifact_id": {
            "type": "string"
          },
          "expires_in_seconds": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "purpose": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "DownloadTokenResponse": {
        "type": "object",
        "required": [
          "download_url",
          "expires_at"
        ],
        "properties": {
          "download_url": {
            "type": "string"
          },
          "expires_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EntitlementCreateRequest": {
        "type": "object",
        "required": [
          "product",
          "starts_at"
        ],
        "properties": {
          "ends_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "metadata": {},
          "product": {
            "type": "string"
          },
          "starts_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EntitlementListQuery": {
        "type": "object",
        "properties": {
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "offset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "product": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "EntitlementListResponse": {
        "type": "object",
        "required": [
          "entitlements",
          "limit",
          "offset"
        ],
        "properties": {
          "entitlements": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/EntitlementResponse"
            }
          },
          "limit": {
            "type": "integer",
            "format": "int64"
          },
          "offset": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EntitlementResponse": {
        "type": "object",
        "required": [
          "id",
          "customer_id",
          "product",
          "starts_at"
        ],
        "properties": {
          "customer_id": {
            "type": "string"
          },
          "ends_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "id": {
            "type": "string"
          },
          "metadata": {},
          "product": {
            "type": "string"
          },
          "starts_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EntitlementUpdateRequest": {
        "type": "object",
        "properties": {
          "ends_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "metadata": {},
          "product": {
            "type": [
              "string",
              "null"
            ]
          },
          "starts_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          }
        }
      },
      "ErrorBody": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "$ref": "#/components/schemas/ErrorDetail"
          }
        }
      },
      "ErrorDetail": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "ReleaseCreateRequest": {
        "type": "object",
        "required": [
          "product",
          "version"
        ],
        "properties": {
          "product": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        }
      },
      "ReleaseListQuery": {
        "type": "object",
        "properties": {
          "include_artifacts": {
            "type": [
              "boolean",
              "null"
            ]
          },
          "limit": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "offset": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "minimum": 0
          },
          "product": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "type": [
              "string",
              "null"
            ]
          },
          "version": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ReleaseListResponse": {
        "type": "object",
        "required": [
          "releases",
          "limit",
          "offset"
        ],
        "properties": {
          "limit": {
            "type": "integer",
            "format": "int64"
          },
          "offset": {
            "type": "integer",
            "format": "int64"
          },
          "releases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReleaseResponse"
            }
          }
        }
      },
      "ReleaseResponse": {
        "type": "object",
        "required": [
          "id",
          "product",
          "version",
          "status",
          "created_at"
        ],
        "properties": {
          "artifacts": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/ArtifactSummary"
            }
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string"
          },
          "product": {
            "type": "string"
          },
          "published_at": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int64"
          },
          "status": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "admin_key": {
        "type": "apiKey",
        "in": "header",
        "name": "x-releasy-admin-key"
      },
      "api_key": {
        "type": "apiKey",
        "in": "header",
        "name": "x-releasy-api-key"
      },
      "operator_jwt": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "admin",
      "description": "Bootstrap administration endpoints."
    },
    {
      "name": "entitlements",
      "description": "Customer entitlements management."
    },
    {
      "name": "audit",
      "description": "Audit event access."
    },
    {
      "name": "keys",
      "description": "API key management."
    },
    {
      "name": "releases",
      "description": "Release lifecycle endpoints."
    },
    {
      "name": "artifacts",
      "description": "Artifact upload and registration."
    },
    {
      "name": "downloads",
      "description": "Download token issuance and resolution."
    },
    {
      "name": "auth",
      "description": "API key introspection."
    },
    {
      "name": "meta",
      "description": "Service metadata endpoints."
    }
  ]
}
